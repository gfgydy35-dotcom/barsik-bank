<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∞—Ä—Å–∏–∫-–ë–∞–Ω–∫</title>
    <style>
        body { 
            font-family: Arial; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        /* –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ö–û–ú–ü–¨–Æ–¢–ï–†–ê */
        .computer-interface {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .header {
            background: #1e3a8a;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .card-creator {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        /* –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¢–ï–õ–ï–§–û–ù–ê */
        .phone-interface {
            display: none;
            padding: 10px;
        }
        
        .terminal {
            background: black;
            color: lime;
            padding: 20px;
            border-radius: 10px;
            font-family: monospace;
            min-height: 300px;
        }
    </style>
</head>
<body>
    <!-- –ö–û–ú–ü–¨–Æ–¢–ï–†–ù–´–ô –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
    <div class="computer-interface" id="computerInterface">
        <div class="header">
            <h1>üè¶ –ë–∞—Ä—Å–∏–∫-–ë–∞–Ω–∫ (–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)</h1>
            <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫–∞—Ä—Ç—ã –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–ª–∞—Ç–µ–∂–∞–º–∏</p>
        </div>
        
        <div class="card-creator">
            <h2>üé® –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É</h2>
            <input type="text" id="cardName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã">
            <button onclick="createCard()">–°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç—É</button>
            <div id="cardsList"></div>
        </div>
        
        <div class="transactions">
            <h2>üìã –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
            <div id="transactionsList"></div>
        </div>
    </div>

    <!-- –¢–ï–õ–ï–§–û–ù–ù–´–ô –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Ç–µ—Ä–º–∏–Ω–∞–ª) -->
    <div class="phone-interface" id="phoneInterface">
        <div class="terminal">
            <h2>üí≥ –¢–µ—Ä–º–∏–Ω–∞–ª –ë–∞—Ä—Å–∏–∫-–ë–∞–Ω–∫–∞</h2>
            <div id="terminalDisplay">
                <p>–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</p>
                <p class="amount">0.00 ‚ÇΩ</p>
            </div>
            <button onclick="startPayment()">üí∏ –ù–∞—á–∞—Ç—å –ø—Ä–∏–µ–º –ø–ª–∞—Ç–µ–∂–∞</button>
            <div id="paymentLog"></div>
        </div>
    </div>

    <script>
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
function checkDevice() {
    const isPhone = /Android|iPhone|iPad/i.test(navigator.userAgent);
    
    if (isPhone) {
        document.getElementById('computerInterface').style.display = 'none';
        document.getElementById('phoneInterface').style.display = 'block';
        console.log('–ó–∞–ø—É—â–µ–Ω —Ä–µ–∂–∏–º –¢–ï–†–ú–ò–ù–ê–õ–ê –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ');
        initNFC(); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º NFC –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    } else {
        document.getElementById('computerInterface').style.display = 'block';
        document.getElementById('phoneInterface').style.display = 'none';
        console.log('–ó–∞–ø—É—â–µ–Ω —Ä–µ–∂–∏–º –ê–î–ú–ò–ù–ê –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ');
    }
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ö–û–ú–ü–¨–Æ–¢–ï–†–ê
function createCard() {
    const cardName = document.getElementById('cardName').value;
    if (!cardName) return;
    
    alert('–ö–∞—Ä—Ç–∞ "' + cardName + '" —Å–æ–∑–¥–∞–Ω–∞!');
    document.getElementById('cardName').value = '';
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¢–ï–õ–ï–§–û–ù–ê —Å NFC
let nfcReader = null;

async function initNFC() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É Web NFC
    if (!('NDEFReader' in window)) {
        document.getElementById('terminalDisplay').innerHTML = 
            '<p>‚ùå NFC –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</p>' +
            '<p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Chrome –Ω–∞ Android</p>';
        return;
    }
    
    try {
        nfcReader = new NDEFReader();
        document.getElementById('terminalDisplay').innerHTML = 
            '<p>‚úÖ NFC –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</p>' +
            '<p class="amount">0.00 ‚ÇΩ</p>' +
            '<button onclick="startNFCScan()">üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å NFC</button>';
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ NFC:', error);
        document.getElementById('terminalDisplay').innerHTML = 
            '<p>‚ùå –û—à–∏–±–∫–∞ NFC</p>' +
            '<p>' + error.message + '</p>';
    }
}

async function startNFCScan() {
    if (!nfcReader) {
        alert('NFC –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
        return;
    }
    
    try {
        document.getElementById('terminalDisplay').innerHTML = 
            '<p>üì± –ü—Ä–∏–ª–æ–∂–∏—Ç–µ NFC –º–µ—Ç–∫—É</p>' +
            '<p class="amount">100.00 ‚ÇΩ</p>' +
            '<div class="scanning">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ...</div>';
        
        await nfcReader.scan();
        
        nfcReader.onreading = event => {
            const message = event.message;
            const record = message.records[0];
            let cardData = '';
            
            if (record.recordType === "text") {
                const textDecoder = new TextDecoder(record.encoding);
                cardData = textDecoder.decode(record.data);
            } else if (record.recordType === "url") {
                const textDecoder = new TextDecoder();
                cardData = textDecoder.decode(record.data);
            }
            
            // –°–∏–º—É–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞
            processPayment(cardData);
        };
        
        nfcReader.onreadingerror = () => {
            document.getElementById('terminalDisplay').innerHTML = 
                '<p>‚ùå –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è</p>' +
                '<p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞</p>' +
                '<button onclick="startNFCScan()">üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>';
        };
        
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:', error);
        document.getElementById('terminalDisplay').innerHTML = 
            '<p>‚ùå –û—à–∏–±–∫–∞: ' + error.message + '</p>' +
            '<button onclick="startNFCScan()">üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>';
    }
}

function processPayment(cardData) {
    // –°–∏–º—É–ª—è—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–∞
    document.getElementById('terminalDisplay').innerHTML = 
        '<p>‚úÖ –ü–ª–∞—Ç–µ–∂ –ø—Ä–∏–Ω—è—Ç!</p>' +
        '<p class="amount">100.00 ‚ÇΩ</p>' +
        '<p>–ö–∞—Ä—Ç–∞: ' + (cardData || 'NFC –º–µ—Ç–∫–∞') + '</p>' +
        '<div class="success">–û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞</div>' +
        '<button onclick="resetTerminal()">üîÑ –ù–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂</button>';
    
    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
    addToPaymentLog('‚úÖ –ü–ª–∞—Ç–µ–∂ 100.00 ‚ÇΩ | ' + new Date().toLocaleTimeString());
}

function resetTerminal() {
    document.getElementById('terminalDisplay').innerHTML = 
        '<p>‚úÖ NFC –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</p>' +
        '<p class="amount">0.00 ‚ÇΩ</p>' +
        '<button onclick="startNFCScan()">üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å NFC</button>';
}

function addToPaymentLog(message) {
    const log = document.getElementById('paymentLog');
    const entry = document.createElement('div');
    entry.textContent = message;
    entry.style.padding = '5px';
    entry.style.borderBottom = '1px solid #333';
    log.appendChild(entry);
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
window.onload = checkDevice;
    </script>
</body>
</html>
